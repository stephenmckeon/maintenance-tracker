<h1 class="text-4xl font-bold">Tasks Due</h1>

<div class="mt-5">
  <% @due_tasks.each do |task| %>
    <div class="max-w-lg mx-auto my-4">
      <div class="task-card bg-white shadow-md rounded-lg overflow-hidden">
        <div class="card-header px-4 py-2 cursor-pointer">
          <h2 class="text-lg font-bold"><%= task.name %></h2>
          <p><%= task.description %></p>
        </div>
        <div class="card-content hidden px-4 py-2 border-t border-gray-200">
          <form action="/tasks/<%= task.id %>/complete" method="POST" class="mt-4">
            <textarea name="note" placeholder="Note" class="w-full p-2 border border-gray-300 rounded"></textarea>
            <div class="mt-4 text-right">
              <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Complete</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  <% end %>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const taskCards = document.querySelectorAll(".task-card")

    taskCards.forEach(card => {
      const header = card.querySelector(".card-header")
      const content = card.querySelector(".card-content")

      header.addEventListener("click", function() {
        content.classList.toggle("hidden")
      })
    })
  })
</script>
